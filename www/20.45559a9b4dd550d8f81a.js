(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"68Qc":function(n,e){n.exports='<ion-content *ngIf="user">\r\n  <app-profile-header (segment)="segment = $event"\r\n                      [user]="user">\r\n  </app-profile-header>\r\n  <app-profile-info *ngIf="segment === \'Info\'"\r\n                     [user]="user"\r\n                     [info]="info">\r\n  </app-profile-info>\r\n  <app-profile-history *ngIf="segment === \'History\'"\r\n                        [user]="user"\r\n                        [history]="history">\r\n  </app-profile-history>\r\n  <app-profile-settings *ngIf="segment === \'Settings\'"\r\n                        [user]="user">\r\n  </app-profile-settings>\r\n</ion-content>\r\n'},"723k":function(n,e,t){"use strict";t.r(e);var i=t("mrSG"),o=t("CcnG"),r=t("Ip0R"),a=t("gIcY"),s=t("ZYCi"),l=t("ZZ/e"),c=t("9APP"),m=t("K+Ou"),p=t("lGt+"),d=function(){function n(n,e,t,i){this._user=n,this.storage=e,this.nav=t,this.historyService=i,this.segment="Info",this.history=[]}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){this.getUser()},n.prototype.getUser=function(){this.user=this._user.getUser(),this.getUserInfo(),this.getUserHistory()},n.prototype.getUserInfo=function(){var n=this;this._user.getUserInfoById(this.user._id).subscribe(function(e){n.info={comments:e.comments,reactions:e.reactions}})},n.prototype.getUserHistory=function(){var n=this;this.historyService.getHistoryByUser(this.user._id).subscribe(function(e){var t;e.ok&&(t=n.history).push.apply(t,e.history)})},n.prototype.logOut=function(n){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return n?(this.storage.reset(),[3,3]):[3,1];case 1:return[4,this.storage.clear()];case 2:e.sent(),e.label=3;case 3:return this._user.logout(),this.nav.navigateRoot("/login"),[2]}})})},n=i.c([Object(o.n)({selector:"app-profile",template:t("68Qc"),styles:[t("EGjV")]}),i.f("design:paramtypes",[c.a,m.a,l.i,p.d])],n)}(),g=t("V/fk"),u=function(){function n(n){this.nav=n,this.segment=new o.w}return n.prototype.ngOnInit=function(){},n.prototype.goBack=function(){this.nav.navigateBack("/home")},n.prototype.segmentChanged=function(n){this.segment.emit(n.detail.value)},i.c([Object(o.E)(),i.f("design:type",Object)],n.prototype,"user",void 0),i.c([Object(o.Q)(),i.f("design:type",o.w)],n.prototype,"segment",void 0),n=i.c([Object(o.n)({selector:"app-profile-header",template:t("bmFi"),styles:[t("a8e2")]}),i.f("design:paramtypes",[l.i])],n)}(),h=t("PCNd"),f=t("x/1R"),b=function(){function n(n,e,t){this._user=n,this.storage=e,this.crafter=t,this.editingName=!1,this.editingEmail=!1,this.namePattern="^[A-Za-z0-9 _]*[A-Za-z0-9][0-9A-Za-z\xc0-\xff][A-Za-z0-9 _]*$"}return n.prototype.ngOnInit=function(){this.createSignUpForm()},n.prototype.createSignUpForm=function(){this.editUserForm=new a.b({name:new a.a(this.user.name,[a.f.required,a.f.minLength(3),a.f.maxLength(20),a.f.pattern(this.namePattern)]),email:new a.a(this.user.email,[a.f.required,a.f.email,a.f.minLength(5),a.f.maxLength(35)])})},n.prototype.editName=function(){var n=this;this.slidingName.close(),this.editingName=!0,setTimeout(function(){n.name&&n.name.setFocus()},1e3)},n.prototype.editEmail=function(){var n=this;this.slidingEmail.close(),this.editingEmail=!0,setTimeout(function(){n.email&&n.email.setFocus()},1e3)},n.prototype.cancelEdit=function(n){"name"===n?this.editingName=!1:"email"===n&&(this.editingEmail=!1)},n.prototype.updateUser=function(){var n=this;this.editUserForm.invalid||(this.user.name=this.editUserForm.value.name,this.user.email=this.editUserForm.value.email,this._user.updateUser(this.user).subscribe(function(e){e.ok?(n.storage.setToken(e.token),n.editingName=!1,n.editingEmail=!1,n.crafter.alert("user.updated")):n.crafter.alert("error.updating")}))},i.c([Object(o.E)(),i.f("design:type",Object)],n.prototype,"user",void 0),i.c([Object(o.E)(),i.f("design:type",Object)],n.prototype,"info",void 0),i.c([Object(o.lb)("slidingName"),i.f("design:type",l.c)],n.prototype,"slidingName",void 0),i.c([Object(o.lb)("slidingEmail"),i.f("design:type",l.c)],n.prototype,"slidingEmail",void 0),i.c([Object(o.lb)("name"),i.f("design:type",l.b)],n.prototype,"name",void 0),i.c([Object(o.lb)("email"),i.f("design:type",l.b)],n.prototype,"email",void 0),n=i.c([Object(o.n)({selector:"app-profile-info",template:t("FQLw"),styles:[t("LcZy")]}),i.f("design:paramtypes",[c.a,m.a,f.a])],n)}(),y=function(){function n(){this.page=1,this.itemsPerPage=4}return n.prototype.ngOnInit=function(){},n.prototype.swipe=function(n){if(n.deltaX<0){if(this.page===Math.ceil(this.history.length/this.itemsPerPage))return;this.changeFrom(this.page+1)}else{if(1===this.page)return;this.changeFrom(this.page-1)}},n.prototype.changeFrom=function(n){var e=this,t=document.getElementById("history-items").classList;n-this.page>=1?(t.add("slideOutLeft"),t.remove("slideInRight","slideInLeft"),setTimeout(function(){t.remove("slideOutLeft"),t.add("slideInRight")},500)):n-this.page<=-1&&(t.add("slideOutRight"),t.remove("slideInRight","slideInLeft"),setTimeout(function(){t.remove("slideOutRight"),t.add("slideInLeft")},500)),setTimeout(function(){e.page=n},500)},i.c([Object(o.E)(),i.f("design:type",Object)],n.prototype,"user",void 0),i.c([Object(o.E)(),i.f("design:type",Array)],n.prototype,"history",void 0),n=i.c([Object(o.n)({selector:"app-profile-history",template:t("P8Pq"),styles:[t("MetO")]}),i.f("design:paramtypes",[])],n)}(),v=t("MUd8"),x=t("A7o+"),I=function(){function n(n,e,t,i,o){this.crafter=n,this.storage=e,this.translate=t,this._user=i,this.nav=o}return n.prototype.ngOnInit=function(){this.setSettings()},n.prototype.setSettings=function(){this.language=this.storage.getLanguage(),this.remember=this.storage.getRemember()},n.prototype.openSelectTheme=function(){this.crafter.popOver(v.a)},n.prototype.changeLanguage=function(n){this.translate.use(n),this.storage.setLanguage(n)},n.prototype.rememberLogin=function(n){"yes"===n?this.storage.save("remember",!0):this.storage.save("remember",!1)},n.prototype.logout=function(){this._user.logout(),this.storage.clear(),this.nav.navigateRoot("/login")},i.c([Object(o.E)(),i.f("design:type",Object)],n.prototype,"user",void 0),n=i.c([Object(o.n)({selector:"app-profile-settings",template:t("Iz3W"),styles:[t("Npaw")]}),i.f("design:paramtypes",[f.a,m.a,x.c,c.a,l.i])],n)}(),O=t("xkgV");t.d(e,"ProfilePageModule",function(){return k});var w=[{path:"",component:d}],k=function(){function n(){}return n=i.c([Object(o.J)({imports:[r.b,a.c,l.e,g.a,h.a,a.e,O.a,s.i.forChild(w)],declarations:[d,u,b,y,I]})],n)}()},EGjV:function(n,e){n.exports=""},FQLw:function(n,e){n.exports='<div class="info animated fadeIn">\r\n  <ion-list>\r\n    <ion-item-divider>\r\n     {{\'user.data\' | translate}}\r\n    </ion-item-divider>\r\n    <ion-item-sliding #slidingName *ngIf="!editingName">\r\n      <ion-item detail>\r\n        <ion-icon slot="start" color="light" name="person"></ion-icon>\r\n        <ion-label>{{user.name}}</ion-label>\r\n      </ion-item>\r\n      <ion-item-options>\r\n        <ion-item-option (click)="editName()">\r\n          <ion-icon slot="icon-only" color="light" name="create"></ion-icon>\r\n        </ion-item-option>\r\n      </ion-item-options>\r\n    </ion-item-sliding>\r\n    <form [formGroup]="editUserForm">\r\n      <ion-item *ngIf="editingName">\r\n        <ion-icon slot="start" color="light" name="person"></ion-icon>\r\n        <ion-input name="name"\r\n                  #name\r\n                  autofocus="true"\r\n                  formControlName="name"\r\n                  type="text"\r\n                  required>\r\n        </ion-input>\r\n        <ion-buttons slot="end">\r\n          <ion-button (click)="updateUser()"\r\n                      [disabled]="editUserForm.invalid || editUserForm.value.name === user.name">\r\n            <ion-icon color="success" class="edit" name="create"></ion-icon>\r\n          </ion-button>\r\n          <ion-button (click)="cancelEdit(\'name\')" class="btn">\r\n            <ion-icon color="danger" class="edit" name="close"></ion-icon>\r\n          </ion-button>\r\n        </ion-buttons>\r\n      </ion-item>\r\n      <ion-item-sliding #slidingEmail *ngIf="!editingEmail">\r\n        <ion-item detail>\r\n          <ion-icon slot="start" color="light" name="mail"></ion-icon>\r\n          <ion-label>{{user.email}}</ion-label>\r\n        </ion-item>\r\n        <ion-item-options>\r\n          <ion-item-option  (click)="editEmail()">\r\n            <ion-icon slot="icon-only" color="light" name="create"></ion-icon>\r\n          </ion-item-option>\r\n        </ion-item-options>\r\n      </ion-item-sliding>\r\n      <ion-item *ngIf="editingEmail">\r\n          <ion-icon slot="start" color="light" name="mail"></ion-icon>\r\n          <ion-input type="email"\r\n                    name="email"\r\n                    #email\r\n                    autofocus="true"\r\n                    formControlName="email"\r\n                    required>\r\n          </ion-input>\r\n          <ion-buttons slot="end">\r\n            <ion-button (click)="updateUser()"\r\n                        [disabled]="editUserForm.invalid || editUserForm.value.email === user.email">\r\n              <ion-icon color="success" class="edit" name="create"></ion-icon>\r\n            </ion-button>\r\n            <ion-button (click)="cancelEdit(\'email\')" class="btn">\r\n              <ion-icon color="danger" class="edit" name="close"></ion-icon>\r\n            </ion-button>\r\n          </ion-buttons>\r\n        </ion-item>\r\n      </form>\r\n      <ion-item>\r\n        <ion-icon slot="start" color="light" name="key"></ion-icon>\r\n        <ion-label>{{user.account}}</ion-label>\r\n      </ion-item>\r\n      <ion-item-divider class="divider">\r\n        {{\'interactions\' | translate}}\r\n      </ion-item-divider>\r\n      <div *ngIf="info">\r\n        <ion-item>\r\n          <ion-icon slot="start" color="light" name="mail-open"></ion-icon>\r\n          <ion-label>{{\'comments\' | translate}}</ion-label>\r\n          <ion-badge color="primary" slot="end">{{info.comments}}</ion-badge>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-icon slot="start" color="light" name="happy"></ion-icon>\r\n          <ion-label>{{\'reactions\' | translate}}</ion-label>\r\n          <ion-badge color="primary" slot="end">{{info.reactions}}</ion-badge>\r\n        </ion-item>\r\n      </div>\r\n      <div *ngIf="!info">\r\n        <ion-spinner name="lines" color="primary"></ion-spinner>\r\n      </div>\r\n  </ion-list>\r\n</div>\r\n'},Iz3W:function(n,e){n.exports='<div class="settings animated fadeIn">\n  <ion-list>\n    <ion-item-divider>\n      {{\'settings\' | translate}}\n    </ion-item-divider>\n    <ion-item>\n      <ion-label>{{\'language\' | translate}}</ion-label>\n      <ion-select #lang\n                  (ionChange)="changeLanguage(lang.value)"\n                  mode="md"\n                  interface="action-sheet">\n        <ion-select-option value="en" [selected]="language === \'en\'">{{\'english\' | translate}}</ion-select-option>\n        <ion-select-option value="es" [selected]="language === \'es\'">{{\'spanish\' | translate}}</ion-select-option>\n      </ion-select>\n    </ion-item>\n    <ion-item>\n      <ion-label>{{\'remember.login\' | translate}}?</ion-label>\n      <ion-select #login\n                  (ionChange)="rememberLogin(login.value)"\n                  mode="md"\n                  interface="action-sheet">\n        <ion-select-option value="yes" [selected]="remember === true">{{\'yes\' | translate}}</ion-select-option>\n        <ion-select-option value="no" [selected]="remember === false">No</ion-select-option>\n      </ion-select>\n    </ion-item>\n    <ion-item>\n      <ion-label>{{\'theme\' | translate}}</ion-label>\n      <ion-button slot="end" class="btn" (click)="openSelectTheme()">\n        <ion-icon slot="icon-only" name="color-palette"></ion-icon>\n      </ion-button>\n    </ion-item>\n  </ion-list>\n  <ion-list>\n    <ion-item-divider>\n      <ion-text class="bold-only" color="danger">{{\'danger.zone\' | translate}}</ion-text>\n    </ion-item-divider>\n    <ion-item>\n      <ion-label>{{\'delete.account\' | translate}}</ion-label>\n      <ion-button slot="end" class="btn">\n        <ion-icon slot="icon-only" name="trash"></ion-icon>\n      </ion-button>\n    </ion-item>\n  </ion-list>\n  <ion-button type="submit"\n              expand="full"\n              color="primary"\n              shape="round"\n              mode="md"\n              class="logout"\n              (click)="logout()">\n              {{\'logout\' | translate}}\n  </ion-button>\n</div>\n\n'},LcZy:function(n,e){n.exports=".info {\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 10px;\n  padding-top: 5px;\n  padding-bottom: 0; }\n\nion-list {\n  margin-bottom: 0; }\n\nion-label, ion-input {\n  font-size: .8em !important; }\n\nion-item-sliding:hover {\n  cursor: pointer; }\n\nion-badge {\n  width: 30px;\n  height: 20px; }\n\nion-item-divider {\n  border-bottom: 0; }\n\nion-buttons {\n  margin-left: 0 !important;\n  position: relative;\n  left: 10px; }\n\nion-item-option {\n  background: transparent; }\n\n.divider {\n  margin-top: 10px; }\n\n.edit {\n  font-size: 1.85em !important;\n  padding: 0; }\n\n.btn {\n  --padding-start: 1px;\n  --padding-end: 1px; }\n"},MetO:function(n,e){n.exports=".history {\n  max-width: 100%;\n  margin: 0 auto;\n  margin-bottom: 15px;\n  height: 310px;\n  padding: 10px;\n  padding-top: 5px; }\n\n.no-history {\n  width: 100%;\n  height: 310px;\n  display: flex;\n  align-items: center;\n  justify-content: center; }\n\nion-list {\n  margin-bottom: 0; }\n\nion-item {\n  margin-top: 5px; }\n\nion-icon {\n  position: relative;\n  top: -5px; }\n\nion-item-divider {\n  border-bottom: 0; }\n\nion-label {\n  font-size: .8em !important;\n  padding-right: 10px; }\n\np {\n  margin-top: 5px;\n  font-size: .9em !important; }\n"},Npaw:function(n,e){n.exports=".settings {\n  max-width: 100%;\n  margin: 0 auto;\n  padding: 10px;\n  padding-top: 5px;\n  padding-bottom: 0; }\n\nion-list {\n  margin-bottom: 0; }\n\nion-label, ion-select {\n  font-size: .8em !important; }\n\nion-item-divider {\n  border-bottom: 0; }\n\n.logout {\n  margin: 25px auto; }\n\n.btn {\n  --background: transparent;\n  --box-shadow: none; }\n"},P8Pq:function(n,e){n.exports='<div class="history animated fadeIn">\r\n  <ion-list *ngIf="history.length > 0">\r\n    <ion-item-divider>\r\n      {{\'you.reacted\' | translate}}\r\n    </ion-item-divider>\r\n    <div class="animated fast"\r\n        id="history-items"\r\n        (swipe)="swipe($event)">\r\n            <ion-item *ngFor="let h of history |\r\n                              paginate: { id: \'history\',\r\n                                          itemsPerPage: itemsPerPage,\r\n                                          currentPage: page }">\r\n\r\n              <ion-icon slot="start"\r\n                        [color]="h.type | iconColor"\r\n                        [name]="h.type | iconType">\r\n              </ion-icon>\r\n              <ion-label>\r\n                {{h.title}}\r\n                <p>{{h.created}}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n      </div>\r\n    </ion-list>\r\n    <div *ngIf="history.length === 0" class="no-history">\r\n      <h5>{{\'no.history\' | translate}}</h5>\r\n    </div>\r\n    <div *ngIf="!history">\r\n      <ion-spinner name="lines" color="primary"></ion-spinner>\r\n    </div>\r\n  </div>\r\n\r\n<app-pagination *ngIf="history.length > 0"\r\n                (index)="changeFrom($event)"\r\n                id="history">\r\n</app-pagination>\r\n\r\n\r\n\r\n'},a8e2:function(n,e){n.exports=".profile-header {\n  position: relative;\n  width: 100%;\n  height: 225px;\n  background-image: var(--ion-background);\n  background-position: center;\n  background-size: 100% 100%;\n  max-width: 100%;\n  margin: 0 auto;\n  margin-bottom: 5px; }\n\nion-icon {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  font-size: 2em; }\n\nion-icon:hover {\n    cursor: pointer; }\n\nimg {\n  width: 50px;\n  height: 50px;\n  margin-top: 18px; }\n\np {\n  margin: 5px auto;\n  margin-bottom: 0;\n  font-size: 1.2em; }\n\nspan {\n  color: var(--ion-color-dark);\n  font-size: .8em; }\n\nion-segment {\n  position: absolute;\n  bottom: 0; }\n\nion-label {\n  color: var(--ion-color-light);\n  text-transform: capitalize;\n  font-weight: bold;\n  margin-bottom: -5px;\n  font-size: .9em; }\n\nion-segment-button {\n  color: var(--ion-color-light) !important;\n  --color-checked: white !important; }\n\n.sc-ion-segment-md-h {\n  --indicator-color: transparent !important;\n  --ripple-color: transparent !important; }\n\n@media (min-height: 650px) {\n  .profile-header {\n    margin-bottom: 15px; } }\n"},bmFi:function(n,e){n.exports='<div class="profile-header" text-center>\n  <ion-icon slot="icon-only"\n            name="arrow-round-back"\n            color="light"\n            (click)="goBack()">\n  </ion-icon>\n  <img [src]="user.avatar | avatar"/>\n  <p>{{user.name}}</p>\n  <span>{{user.email}}</span>\n  <ion-segment (ionChange)="segmentChanged($event)"\n               value="Info"\n               mode="md">\n    <ion-segment-button value="Info">\n      <ion-label>{{\'profile.info\' | translate}}</ion-label>\n    </ion-segment-button>\n    <ion-segment-button value="History">\n      <ion-label>{{\'profile.history\' | translate}}</ion-label>\n    </ion-segment-button>\n    <ion-segment-button value="Settings">\n      <ion-label>{{\'profile.settings\' | translate}}</ion-label>\n    </ion-segment-button>\n  </ion-segment>\n</div>\n'}}]);